# 자바스크립트의 비동기처리

> 비동기(Asynchronous) <br />
> 일반적으로는 코드 해석이 위에서 아래로 순차적으로 이뤄지는 반면, **특정 코드의 연산이 끝날 때 까지 기다리지 않고 다음 코드를 실행**하는 자바스크립트의 특성을 말한다.

## 왜 비동기처리가 필요할까?

자바스크립트는 **싱글스레드** 기반의 언어이기 때문에 호출 스텍이 한개로 제한적이다.<br />
브라우저에서 서버로 데이터를 요청했을 경우를 예로 들자면, 서버의 응답시간을 예상할 수 없기 때문에 응답을 기다리지 않고 다음 코드를 실행하는 것이다. 하지만 서버에서 데이터를 다 받아오기도 전에 브라우저 랜더링에서 오류가 날 수 있기 때문에 이 과정을 `Promise`, `setTimeout` 등의 문법을 사용해서 서버에서 데이터를 받아오는 로직이 끝날 때 까지 코드진행을 막아주고, 다음 코드가 진행될 수 있도록 해준다.

비동기처리에 관련된 몇가지 방식을 알아보자.

- AJAX(Asynchronous Javascript XML)<br />
  **비동기 javascript와 XML**을 말하는데, 즉 서버와 통신하기 위해 `XMLHttpRequest` 객체를 사용하는 것을 말한다.
  - 서버의 요청을 페이지의 새로고침 없이 수행 가능
  - 서버로부터 데이터를 받고 작업 수행 가능
  - JSON, XML, HTML, 일반 텍스트 형식 등을 포함한 다양한 포멧을 주고받을 수 있다.
  - 페이지 전체를 리프레쉬 하지 않고 수행되는 `비동기성` 형식<br />
    => 사용자의 이벤트가 있을 경우, 전체 페이지가 아닌 일부분만을 업데이트할 수 있게 해준다.
- Promise<br />
  자바스크립트 비동기처리를 간편하게 도와주는 객체(object)

  - 시간이 걸리는 작업을 수행한 후, **정상적으로 수행됬을 때에는 성공의 메세지와 함께 결과값을 전달하고, 실패할 경우엔 에러를 발생**시킨다.<br />
    => 비동기처리에서 성공/실패를 분리하여 메소드를 수행하도록 함

  - 순차적이지 않은 비동기함수의 **실행순서를 제어**할 수 있도록 도와줌
  - 콜백함수에 비해 가독성이 좋음
  - 반환된 결과물의 사용이 용이함
  - 상태값
    - Pending(대기)
    - Fulfilled(이행/완료)
    - Reject(에러)

- Async/Await<br />
  `Promise`를 더 쉽게 사용할 수 있도록 해주는 문법 (= syntatic sugar)<br />
  - 함수 앞에 `async` 키워드를 사용하고 함수 내부의 Promise 앞부분에는 `await` 키워드를 추가하여 사용
  - 에러핸들링을 위해서 `try...catch` 구문을 사용

### Promise와 Callback의 차이점

두가지 모두 자바스크립트에서 비동기처리를 담당하지만, 몇가지 차이점이 존재한다.

- 가독성 측면에서 <span style="color: orange">Promise > Callback</span><br />
  ➔ Promise는 성공/실패 메소드를 나누어 `.then`을 사용하여 처리하기 때문에 가독성이 좋다.<br />
  만약 연속적인 비동기처리가 필요한 경우엔, Callback을 사용하면 계속해서 처리값을 전달하는 과정에 있어서 흔히 말하는 **콜백지옥**이 발생하여 가독성이 나빠진다.

- 재사용성 측면에서 <span style="color: orange">Promise > Callback</span><br />
  ➔ Callback을 사용하여 비동기처리를 할 경우엔, Callback 바깥에서는 처리값을 재사용할 수 없다.<br />
  하지만 Promise를 사용하면 비동기로 처리한 값이 `Promise` 객체에 저장되기 때문에, 값의 재사용이 가능해진다.
